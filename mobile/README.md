# Data diode demo mobile app

To start:

```
npm install
npm run dev -- --open
```

# Emulate the position to intersection service

```
nats -s <nats-ip> --user <user> --password <password> reply "light-nearest" '{"intersectionId": 53694, "signalGroup": 4}'
```

# Emulate a GREEN light status update

```
nats -s <server> --user <user> --password <password> publish light-status.53694 '{"id": "53694", "current_time": 1673997750736, "TSCtime": "49947.0", "phases": [{"phase": 1, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "onats -s 128.46.199.238 --user diode --password 9c7TCRO publish light-status.53694 '{"id": "53694", "current_time": 1673997750736, "TSCtime": "49947.0", "phases": [{"phase": 1, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 9.0, "vehTimeMax": 6553.5, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 2, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 9.0, "vehTimeMax": 65.0, "pedTimeMin": 9.0, "pedTimeMax": 6553.5, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 3, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 19.0, "vehTimeMax": 6553.5, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 4, "color": "GREEN", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 5.0, "vehTimeMax": 22.0, "pedTimeMin": 5.0, "pedTimeMax": 6553.5, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 5, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 9.0, "vehTimeMax": 6553.5, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 6, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 9.0, "vehTimeMax": 6553.5, "pedTimeMin": 9.0, "pedTimeMax": 6553.5, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 7, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 19.0, "vehTimeMax": 6553.5, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 8, "color": "GREEN", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 5.0, "vehTimeMax": 22.0, "pedTimeMin": 5.0, "pedTimeMax": 6553.5, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 9, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 10, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 11, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash":false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 12, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 13, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 14, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 15, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 16, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}]}'
```

# Emulate a RED light status update

```
nats -s <server> --user <user> --password <password> publish light-status.53694 '{"id": "53694", "current_time": 1673997750736, "TSCtime": "49947.0", "phases": [{"phase": 1, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "onats -s 128.46.199.238 --user diode --password 9c7TCRO publish light-status.53694 '{"id": "53694", "current_time": 1673997750736, "TSCtime": "49947.0", "phases": [{"phase": 1, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 9.0, "vehTimeMax": 6553.5, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 2, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 9.0, "vehTimeMax": 65.0, "pedTimeMin": 9.0, "pedTimeMax": 6553.5, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 3, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 19.0, "vehTimeMax": 6553.5, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 4, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 5.0, "vehTimeMax": 22.0, "pedTimeMin": 5.0, "pedTimeMax": 6553.5, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 5, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 9.0, "vehTimeMax": 6553.5, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 6, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 9.0, "vehTimeMax": 6553.5, "pedTimeMin": 9.0, "pedTimeMax": 6553.5, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 7, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 19.0, "vehTimeMax": 6553.5, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 8, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 5.0, "vehTimeMax": 22.0, "pedTimeMin": 5.0, "pedTimeMax": 6553.5, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 9, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 10, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 11, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash":false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 12, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 13, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 14, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 15, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}, {"phase": 16, "color": "RED", "flash": false, "dont_walk": true, "walk": false, "pedestrianClear": false, "overlap": {"green": false, "red": true, "yellow": false, "flash": false}, "vehTimeMin": 0.0, "vehTimeMax": 0.0, "pedTimeMin": 0.0, "pedTimeMax": 0.0, "overlapMin": 0.0, "overlapMax": 0.0}]}'
```

